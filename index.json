{"repository_name":"wgsim","body":"# wgsim.cr\n\n[![build](https://github.com/kojix2/wgsim.cr/actions/workflows/build.yml/badge.svg)](https://github.com/kojix2/wgsim.cr/actions/workflows/build.yml)\n\nTrying to re-implement and add functionality to [wgsim](https://github.com/lh3/wgsim) in Crystal.\n\n:black_cat: Please note that this project has been created for personal learning and experimental purposes and is not intended for practical use.\n\n## Installation\n\n[GitHub Releases](https://github.com/kojix2/wgsim.cr/releases/latest)\n\nFrom source:\n\n```sh\ngit clone https://github.com/kojix2/wgsim.cr\ncd wgsim.cr\nshards build --release -Dpreview_mt src/wgsim.cr\n```\n\n## Usage\n\n```\n  Program: wgsim (Crystal implementation of wgsim)\n  Version: 0.0.1.alpha\n    mut          mutate the reference\n    seq          generate the reads\n    version      show version number\n```\n\n```\n  Usage: wgsim mut [options] <in.ref.fa>\n\n    -r FLOAT     rate of mutations [0.001]\n    -R FLOAT     fraction of indels [0.15]\n    -X FLOAT     probability an indel is extended [0.3]\n    -S UINT64    seed for random generator\n    -t INT       Number of threads [4]\n    --help       show this help message\n```\n\n```\n  Usage: wgsim seq [options] <in.ref.fa> <out.read1.fq> <out.read2.fq>\n\n    -e FLOAT     base error rate [0.02]\n    -d INT       outer distance between the two ends [500]\n    -s INT       standard deviation [50]\n    -D FLOAT     average sequencing depth [10.0]\n    -1 INT       length of the first read [70]\n    -2 INT       length of the second read [70]\n    -A FLOAT     Discard reads over FLOAT% ambiguous bases [0.05]\n    -S UINT64    seed for random generator\n    -t INT       Number of threads [4]\n    --help       show this help message\n```\n\n## NOTE\n\n- The tool provides two simulation classes: `MutationSimulator` and `SequenceSimulator`. (You may also want to add a `SelectionSimulator`.)\n- The key point is to include the complete DNA sequence of the cell's genome in the Fasta file. In the case of diploid cells, two Fasta records should be added for each pair of homologous chromosomes. When there is an increase in chromosome copy number due to extrachromosomal DNA, additional records must be included in the Fasta file to reflect this amplification. If a chromosome undergoes inversion or fusion, the Fasta file should contain a record that accurately represents these changes. This means that the genome should not be represented in any compressed form on the computer. Consequently, there will be as many `UInt8` or `RefBase` structures as there are nucleotides. While this approach may reduce processing speed and increase disk and memory usage, it helps to avoid many complications.\n- [wgsimのコードを眺める [JA]](https://qiita.com/kojix2/items/35318fbefe0e2ea9fca1)\n\n## Development\n\nDependencies:\n\n- [kojix2/nworkers.cr](https://github.com/kojix2/nworkers.cr) - Set the number of worker threads at runtime.\n- [kojix2/randn.cr](https://github.com/kojix2/randn.cr) - Normal random number generator.\n- [kojix2/fastx.cr](https://github.com/kojix2/fastx.cr) - Fasta file reader.\n  \n## Contributing\n\n1. Fork it (<https://github.com/kojix2/wgsim/fork>)\n2. Create your feature branch (`git checkout -b my-new-feature`)\n3. Commit your changes (`git commit -am 'Add some feature'`)\n4. Push to the branch (`git push origin my-new-feature`)\n5. Create a new Pull Request\n","program":{"html_id":"wgsim/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"locations":[],"repository_name":"wgsim","program":true,"enum":false,"alias":false,"const":false,"types":[{"html_id":"wgsim/Wgsim","path":"Wgsim.html","kind":"module","full_name":"Wgsim","name":"Wgsim","abstract":false,"locations":[{"filename":"src/wgsim.cr","line_number":6,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim.cr#L6"},{"filename":"src/wgsim/cli.cr","line_number":6,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/cli.cr#L6"},{"filename":"src/wgsim/mutate/action.cr","line_number":6,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/action.cr#L6"},{"filename":"src/wgsim/mutate/option.cr","line_number":1,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/option.cr#L1"},{"filename":"src/wgsim/mutate/simulator.cr","line_number":3,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/simulator.cr#L3"},{"filename":"src/wgsim/parser.cr","line_number":10,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/parser.cr#L10"},{"filename":"src/wgsim/ref_base.cr","line_number":1,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/ref_base.cr#L1"},{"filename":"src/wgsim/sequence/action.cr","line_number":5,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/action.cr#L5"},{"filename":"src/wgsim/sequence/option.cr","line_number":1,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L1"},{"filename":"src/wgsim/sequence/simulator.cr","line_number":1,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/simulator.cr#L1"},{"filename":"src/wgsim/utils.cr","line_number":3,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/utils.cr#L3"},{"filename":"src/wgsim/version.cr","line_number":1,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/version.cr#L1"}],"repository_name":"wgsim","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"VERSION","name":"VERSION","value":"{{ (`shards version /home/runner/work/wgsim.cr/wgsim.cr/src/wgsim`).chomp.stringify }}"}],"types":[{"html_id":"wgsim/Wgsim/CLI","path":"Wgsim/CLI.html","kind":"class","full_name":"Wgsim::CLI","name":"CLI","abstract":false,"superclass":{"html_id":"wgsim/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"wgsim/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"wgsim/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/wgsim/cli.cr","line_number":7,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/cli.cr#L7"}],"repository_name":"wgsim","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"wgsim/Wgsim","kind":"module","full_name":"Wgsim","name":"Wgsim"},"constructors":[{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/wgsim/cli.cr","line_number":11,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/cli.cr#L11"},"def":{"name":"new","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"option:Mutate::Option|Sequence::Option-instance-method","name":"option","abstract":false,"location":{"filename":"src/wgsim/cli.cr","line_number":9,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/cli.cr#L9"},"def":{"name":"option","return_type":"Mutate::Option | Sequence::Option","visibility":"Public","body":"@option"}},{"html_id":"parser:Parser-instance-method","name":"parser","abstract":false,"location":{"filename":"src/wgsim/cli.cr","line_number":8,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/cli.cr#L8"},"def":{"name":"parser","return_type":"Parser","visibility":"Public","body":"@parser"}},{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/wgsim/cli.cr","line_number":16,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/cli.cr#L16"},"def":{"name":"run","visibility":"Public","body":"case @option\nwhen Mutate::Option\n  Mutate::Action.run(@option.as(Mutate::Option))\nwhen Sequence::Option\n  Sequence::Action.run(@option.as(Sequence::Option))\nelse\n  raise(ArgumentError.new(\"Invalid action\"))\nend"}}]},{"html_id":"wgsim/Wgsim/Mutate","path":"Wgsim/Mutate.html","kind":"module","full_name":"Wgsim::Mutate","name":"Mutate","abstract":false,"locations":[{"filename":"src/wgsim/mutate/action.cr","line_number":7,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/action.cr#L7"},{"filename":"src/wgsim/mutate/option.cr","line_number":2,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/option.cr#L2"},{"filename":"src/wgsim/mutate/simulator.cr","line_number":4,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/simulator.cr#L4"}],"repository_name":"wgsim","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"wgsim/Wgsim","kind":"module","full_name":"Wgsim","name":"Wgsim"},"types":[{"html_id":"wgsim/Wgsim/Mutate/Action","path":"Wgsim/Mutate/Action.html","kind":"class","full_name":"Wgsim::Mutate::Action","name":"Action","abstract":false,"superclass":{"html_id":"wgsim/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"wgsim/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"wgsim/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/wgsim/mutate/action.cr","line_number":8,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/action.cr#L8"}],"repository_name":"wgsim","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"wgsim/Wgsim/Mutate","kind":"module","full_name":"Wgsim::Mutate","name":"Mutate"},"class_methods":[{"html_id":"run(option)-class-method","name":"run","abstract":false,"args":[{"name":"option","external_name":"option","restriction":""}],"args_string":"(option)","args_html":"(option)","location":{"filename":"src/wgsim/mutate/action.cr","line_number":9,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/action.cr#L9"},"def":{"name":"run","args":[{"name":"option","external_name":"option","restriction":""}],"visibility":"Public","body":"(new(option)).run"}}],"constructors":[{"html_id":"new(option:Option)-class-method","name":"new","abstract":false,"args":[{"name":"option","external_name":"option","restriction":"Option"}],"args_string":"(option : Option)","args_html":"(option : <a href=\"../../Wgsim/Mutate/Option.html\">Option</a>)","location":{"filename":"src/wgsim/mutate/action.cr","line_number":13,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/action.cr#L13"},"def":{"name":"new","args":[{"name":"option","external_name":"option","restriction":"Option"}],"visibility":"Public","body":"_ = allocate\n_.initialize(option)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/wgsim/mutate/action.cr","line_number":20,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/action.cr#L20"},"def":{"name":"run","visibility":"Public","body":"reference = mopts.reference.not_nil!\nmutation_simulator = Simulator.new(mopts.mutation_rate, mopts.indel_fraction, mopts.indel_extension_probability, mopts.seed)\nSTDERR.puts(\"[wgsim] #{mopts}\")\nFastx::Fasta::Reader.open(reference) do |reader|\n  reader.each do |name, sequence|\n    STDERR.puts(\"[wgsim] #{name} #{sequence.size} bp\")\n    reference_sequence = Fastx.normalize_sequence(sequence)\n    2.times do |i|\n      pname = \"#{name.split.first}_#{i}\"\n      puts(\">#{pname}\")\n      mutated_sequence = mutation_simulator.simulate_mutations(pname, reference_sequence)\n      seq = IO::Memory.new\n      mutated_sequence.each do |b|\n        case b.mutation_type\n        when MutType::NOCHANGE, MutType::SUBSTITUTE\n          seq.write_byte(b.nucleotide)\n        when MutType::DELETE\n        when MutType::INSERT\n          seq.write_byte(b.nucleotide)\n          ins = b.insertion\n          if ins\n            seq.write(ins)\n          end\n        end\n      end\n      puts(seq.to_s.gsub(/(.{80})/, \"\\\\1\\n\"))\n    end\n  end\nend\n"}}]},{"html_id":"wgsim/Wgsim/Mutate/Option","path":"Wgsim/Mutate/Option.html","kind":"class","full_name":"Wgsim::Mutate::Option","name":"Option","abstract":false,"superclass":{"html_id":"wgsim/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"wgsim/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"wgsim/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/wgsim/mutate/option.cr","line_number":3,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/option.cr#L3"}],"repository_name":"wgsim","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"wgsim/Wgsim/Mutate","kind":"module","full_name":"Wgsim::Mutate","name":"Mutate"},"instance_methods":[{"html_id":"indel_extension_probability:Float64-instance-method","name":"indel_extension_probability","abstract":false,"location":{"filename":"src/wgsim/mutate/option.cr","line_number":7,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/option.cr#L7"},"def":{"name":"indel_extension_probability","return_type":"Float64","visibility":"Public","body":"@indel_extension_probability"}},{"html_id":"indel_extension_probability=(indel_extension_probability:Float64)-instance-method","name":"indel_extension_probability=","abstract":false,"args":[{"name":"indel_extension_probability","external_name":"indel_extension_probability","restriction":"Float64"}],"args_string":"(indel_extension_probability : Float64)","args_html":"(indel_extension_probability : Float64)","location":{"filename":"src/wgsim/mutate/option.cr","line_number":7,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/option.cr#L7"},"def":{"name":"indel_extension_probability=","args":[{"name":"indel_extension_probability","external_name":"indel_extension_probability","restriction":"Float64"}],"visibility":"Public","body":"@indel_extension_probability = indel_extension_probability"}},{"html_id":"indel_fraction:Float64-instance-method","name":"indel_fraction","abstract":false,"location":{"filename":"src/wgsim/mutate/option.cr","line_number":6,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/option.cr#L6"},"def":{"name":"indel_fraction","return_type":"Float64","visibility":"Public","body":"@indel_fraction"}},{"html_id":"indel_fraction=(indel_fraction:Float64)-instance-method","name":"indel_fraction=","abstract":false,"args":[{"name":"indel_fraction","external_name":"indel_fraction","restriction":"Float64"}],"args_string":"(indel_fraction : Float64)","args_html":"(indel_fraction : Float64)","location":{"filename":"src/wgsim/mutate/option.cr","line_number":6,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/option.cr#L6"},"def":{"name":"indel_fraction=","args":[{"name":"indel_fraction","external_name":"indel_fraction","restriction":"Float64"}],"visibility":"Public","body":"@indel_fraction = indel_fraction"}},{"html_id":"mutation_rate:Float64-instance-method","name":"mutation_rate","abstract":false,"location":{"filename":"src/wgsim/mutate/option.cr","line_number":5,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/option.cr#L5"},"def":{"name":"mutation_rate","return_type":"Float64","visibility":"Public","body":"@mutation_rate"}},{"html_id":"mutation_rate=(mutation_rate:Float64)-instance-method","name":"mutation_rate=","abstract":false,"args":[{"name":"mutation_rate","external_name":"mutation_rate","restriction":"Float64"}],"args_string":"(mutation_rate : Float64)","args_html":"(mutation_rate : Float64)","location":{"filename":"src/wgsim/mutate/option.cr","line_number":5,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/option.cr#L5"},"def":{"name":"mutation_rate=","args":[{"name":"mutation_rate","external_name":"mutation_rate","restriction":"Float64"}],"visibility":"Public","body":"@mutation_rate = mutation_rate"}},{"html_id":"reference:Path|Nil-instance-method","name":"reference","abstract":false,"location":{"filename":"src/wgsim/mutate/option.cr","line_number":8,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/option.cr#L8"},"def":{"name":"reference","return_type":"Path | ::Nil","visibility":"Public","body":"@reference"}},{"html_id":"reference=(reference:Path|Nil)-instance-method","name":"reference=","abstract":false,"args":[{"name":"reference","external_name":"reference","restriction":"Path | ::Nil"}],"args_string":"(reference : Path | Nil)","args_html":"(reference : Path | Nil)","location":{"filename":"src/wgsim/mutate/option.cr","line_number":8,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/option.cr#L8"},"def":{"name":"reference=","args":[{"name":"reference","external_name":"reference","restriction":"Path | ::Nil"}],"visibility":"Public","body":"@reference = reference"}},{"html_id":"seed:UInt64|Nil-instance-method","name":"seed","abstract":false,"location":{"filename":"src/wgsim/mutate/option.cr","line_number":4,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/option.cr#L4"},"def":{"name":"seed","return_type":"UInt64 | ::Nil","visibility":"Public","body":"@seed"}},{"html_id":"seed=(seed:UInt64|Nil)-instance-method","name":"seed=","abstract":false,"args":[{"name":"seed","external_name":"seed","restriction":"UInt64 | ::Nil"}],"args_string":"(seed : UInt64 | Nil)","args_html":"(seed : UInt64 | Nil)","location":{"filename":"src/wgsim/mutate/option.cr","line_number":4,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/option.cr#L4"},"def":{"name":"seed=","args":[{"name":"seed","external_name":"seed","restriction":"UInt64 | ::Nil"}],"visibility":"Public","body":"@seed = seed"}}]},{"html_id":"wgsim/Wgsim/Mutate/Simulator","path":"Wgsim/Mutate/Simulator.html","kind":"class","full_name":"Wgsim::Mutate::Simulator","name":"Simulator","abstract":false,"superclass":{"html_id":"wgsim/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"wgsim/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"wgsim/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/wgsim/mutate/simulator.cr","line_number":6,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/simulator.cr#L6"}],"repository_name":"wgsim","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"ACG","name":"ACG","value":"StaticArray[65_u8, 67_u8, 71_u8]"},{"id":"ACGT","name":"ACGT","value":"StaticArray[65_u8, 67_u8, 71_u8, 84_u8]"},{"id":"ACT","name":"ACT","value":"StaticArray[65_u8, 67_u8, 84_u8]"},{"id":"AGT","name":"AGT","value":"StaticArray[65_u8, 71_u8, 84_u8]"},{"id":"CGT","name":"CGT","value":"StaticArray[67_u8, 71_u8, 84_u8]"}],"namespace":{"html_id":"wgsim/Wgsim/Mutate","kind":"module","full_name":"Wgsim::Mutate","name":"Mutate"},"doc":"This module provides a simple simulator for mutations in a DNA sequence.","summary":"<p>This module provides a simple simulator for mutations in a DNA sequence.</p>","constructors":[{"html_id":"new(mutation_rate:Float64,indel_fraction:Float64,indel_extension_probability:Float64,seed:UInt64|Nil=nil)-class-method","name":"new","abstract":false,"args":[{"name":"mutation_rate","external_name":"mutation_rate","restriction":"::Float64"},{"name":"indel_fraction","external_name":"indel_fraction","restriction":"::Float64"},{"name":"indel_extension_probability","external_name":"indel_extension_probability","restriction":"::Float64"},{"name":"seed","default_value":"nil","external_name":"seed","restriction":"UInt64 | ::Nil"}],"args_string":"(mutation_rate : Float64, indel_fraction : Float64, indel_extension_probability : Float64, seed : UInt64 | Nil = nil)","args_html":"(mutation_rate : Float64, indel_fraction : Float64, indel_extension_probability : Float64, seed : UInt64 | Nil = <span class=\"n\">nil</span>)","location":{"filename":"src/wgsim/mutate/simulator.cr","line_number":14,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/simulator.cr#L14"},"def":{"name":"new","args":[{"name":"mutation_rate","external_name":"mutation_rate","restriction":"::Float64"},{"name":"indel_fraction","external_name":"indel_fraction","restriction":"::Float64"},{"name":"indel_extension_probability","external_name":"indel_extension_probability","restriction":"::Float64"},{"name":"seed","default_value":"nil","external_name":"seed","restriction":"UInt64 | ::Nil"}],"visibility":"Public","body":"_ = allocate\n_.initialize(mutation_rate, indel_fraction, indel_extension_probability, seed)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"_rand(*args,**options)-instance-method","name":"_rand","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/wgsim/mutate/simulator.cr","line_number":7,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/simulator.cr#L7"},"def":{"name":"_rand","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"@random._rand(*args, **options)"}},{"html_id":"_rand(*args,**options,&)-instance-method","name":"_rand","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/wgsim/mutate/simulator.cr","line_number":7,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/simulator.cr#L7"},"def":{"name":"_rand","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arity":1,"visibility":"Public","body":"@random._rand(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"html_id":"generate_insertion:Slice(UInt8)-instance-method","name":"generate_insertion","abstract":false,"location":{"filename":"src/wgsim/mutate/simulator.cr","line_number":49,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/simulator.cr#L49"},"def":{"name":"generate_insertion","return_type":"Slice(UInt8)","visibility":"Public","body":"siz = 1\nwhile _rand <= indel_extension_probability\n  siz = siz + 1\nend\nSlice(UInt8).new(siz) do\n  ACGT.sample\nend\n"}},{"html_id":"indel_extension_probability:Float64-instance-method","name":"indel_extension_probability","abstract":false,"location":{"filename":"src/wgsim/mutate/simulator.cr","line_number":11,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/simulator.cr#L11"},"def":{"name":"indel_extension_probability","return_type":"Float64","visibility":"Public","body":"@indel_extension_probability"}},{"html_id":"indel_extension_probability=(indel_extension_probability:Float64)-instance-method","name":"indel_extension_probability=","abstract":false,"args":[{"name":"indel_extension_probability","external_name":"indel_extension_probability","restriction":"Float64"}],"args_string":"(indel_extension_probability : Float64)","args_html":"(indel_extension_probability : Float64)","location":{"filename":"src/wgsim/mutate/simulator.cr","line_number":11,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/simulator.cr#L11"},"def":{"name":"indel_extension_probability=","args":[{"name":"indel_extension_probability","external_name":"indel_extension_probability","restriction":"Float64"}],"visibility":"Public","body":"@indel_extension_probability = indel_extension_probability"}},{"html_id":"indel_fraction:Float64-instance-method","name":"indel_fraction","abstract":false,"location":{"filename":"src/wgsim/mutate/simulator.cr","line_number":10,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/simulator.cr#L10"},"def":{"name":"indel_fraction","return_type":"Float64","visibility":"Public","body":"@indel_fraction"}},{"html_id":"indel_fraction=(indel_fraction:Float64)-instance-method","name":"indel_fraction=","abstract":false,"args":[{"name":"indel_fraction","external_name":"indel_fraction","restriction":"Float64"}],"args_string":"(indel_fraction : Float64)","args_html":"(indel_fraction : Float64)","location":{"filename":"src/wgsim/mutate/simulator.cr","line_number":10,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/simulator.cr#L10"},"def":{"name":"indel_fraction=","args":[{"name":"indel_fraction","external_name":"indel_fraction","restriction":"Float64"}],"visibility":"Public","body":"@indel_fraction = indel_fraction"}},{"html_id":"mutation_rate:Float64-instance-method","name":"mutation_rate","abstract":false,"location":{"filename":"src/wgsim/mutate/simulator.cr","line_number":9,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/simulator.cr#L9"},"def":{"name":"mutation_rate","return_type":"Float64","visibility":"Public","body":"@mutation_rate"}},{"html_id":"mutation_rate=(mutation_rate:Float64)-instance-method","name":"mutation_rate=","abstract":false,"args":[{"name":"mutation_rate","external_name":"mutation_rate","restriction":"Float64"}],"args_string":"(mutation_rate : Float64)","args_html":"(mutation_rate : Float64)","location":{"filename":"src/wgsim/mutate/simulator.cr","line_number":9,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/simulator.cr#L9"},"def":{"name":"mutation_rate=","args":[{"name":"mutation_rate","external_name":"mutation_rate","restriction":"Float64"}],"visibility":"Public","body":"@mutation_rate = mutation_rate"}},{"html_id":"perform_substitution(nucleotide:UInt8):UInt8-instance-method","name":"perform_substitution","abstract":false,"args":[{"name":"nucleotide","external_name":"nucleotide","restriction":"UInt8"}],"args_string":"(nucleotide : UInt8) : UInt8","args_html":"(nucleotide : UInt8) : UInt8","location":{"filename":"src/wgsim/mutate/simulator.cr","line_number":34,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/simulator.cr#L34"},"def":{"name":"perform_substitution","args":[{"name":"nucleotide","external_name":"nucleotide","restriction":"UInt8"}],"return_type":"UInt8","visibility":"Public","body":"case nucleotide\nwhen 65_u8\n  CGT.sample\nwhen 67_u8\n  AGT.sample\nwhen 71_u8\n  ACT.sample\nwhen 84_u8\n  ACG.sample\nelse\n  78_u8\nend"}},{"html_id":"rand_bool(*args,**options)-instance-method","name":"rand_bool","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/wgsim/mutate/simulator.cr","line_number":7,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/simulator.cr#L7"},"def":{"name":"rand_bool","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"@random.rand_bool(*args, **options)"}},{"html_id":"rand_bool(*args,**options,&)-instance-method","name":"rand_bool","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/wgsim/mutate/simulator.cr","line_number":7,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/simulator.cr#L7"},"def":{"name":"rand_bool","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arity":1,"visibility":"Public","body":"@random.rand_bool(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"html_id":"randn(*args,**options)-instance-method","name":"randn","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/wgsim/mutate/simulator.cr","line_number":7,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/simulator.cr#L7"},"def":{"name":"randn","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"@random.randn(*args, **options)"}},{"html_id":"randn(*args,**options,&)-instance-method","name":"randn","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/wgsim/mutate/simulator.cr","line_number":7,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/simulator.cr#L7"},"def":{"name":"randn","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arity":1,"visibility":"Public","body":"@random.randn(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"html_id":"seed:UInt64|Nil-instance-method","name":"seed","abstract":false,"location":{"filename":"src/wgsim/mutate/simulator.cr","line_number":12,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/simulator.cr#L12"},"def":{"name":"seed","return_type":"UInt64 | ::Nil","visibility":"Public","body":"@seed"}},{"html_id":"seed=(seed:UInt64|Nil)-instance-method","name":"seed=","abstract":false,"args":[{"name":"seed","external_name":"seed","restriction":"UInt64 | ::Nil"}],"args_string":"(seed : UInt64 | Nil)","args_html":"(seed : UInt64 | Nil)","location":{"filename":"src/wgsim/mutate/simulator.cr","line_number":12,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/simulator.cr#L12"},"def":{"name":"seed=","args":[{"name":"seed","external_name":"seed","restriction":"UInt64 | ::Nil"}],"visibility":"Public","body":"@seed = seed"}},{"html_id":"simulate_mutations(name:String,sequence:Slice(UInt8)):Slice(RefBase)-instance-method","name":"simulate_mutations","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"sequence","external_name":"sequence","restriction":"Slice(UInt8)"}],"args_string":"(name : String, sequence : Slice(UInt8)) : Slice(RefBase)","args_html":"(name : String, sequence : Slice(UInt8)) : Slice(<a href=\"../../Wgsim/RefBase.html\">RefBase</a>)","location":{"filename":"src/wgsim/mutate/simulator.cr","line_number":60,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/mutate/simulator.cr#L60"},"def":{"name":"simulate_mutations","args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"sequence","external_name":"sequence","restriction":"Slice(UInt8)"}],"return_type":"Slice(RefBase)","visibility":"Public","body":"deleting = [] of UInt8\nsequence.map_with_index do |n, i|\n  if deleting.present?\n    if _rand < indel_extension_probability\n      deleting << n\n      next RefBase.new(nucleotide: n, mutation_type: MutType::DELETE)\n    else\n      delseq = deleting.map do |n|\n        n.chr\n      end.join\n      STDERR.puts([\"[wgsim]\", \"DEL\", name, (i - deleting.size) + 1, delseq, \".\"].join(\"\\t\"))\n      deleting.clear\n    end\n  end\n  if _rand < mutation_rate && (n != 78_u8)\n    if _rand > indel_fraction\n      nn = perform_substitution(n)\n      STDERR.puts([\"[wgsim]\", \"SUB\", name, i + 1, n.chr, nn.chr].join(\"\\t\"))\n      RefBase.new(nucleotide: nn, mutation_type: MutType::SUBSTITUTE)\n    else\n      if _rand < 0.5\n        deleting << n\n        RefBase.new(nucleotide: n, mutation_type: MutType::DELETE)\n      else\n        ins = generate_insertion\n        STDERR.puts([\"[wgsim]\", \"INS\", name, i + 1, n.chr, n.chr + (String.new(ins))].join(\"\\t\"))\n        RefBase.new(nucleotide: n, mutation_type: MutType::INSERT, insertion: ins)\n      end\n    end\n  else\n    RefBase.new(nucleotide: n, mutation_type: MutType::NOCHANGE)\n  end\nend\n"}}]}]},{"html_id":"wgsim/Wgsim/MutType","path":"Wgsim/MutType.html","kind":"enum","full_name":"Wgsim::MutType","name":"MutType","abstract":false,"ancestors":[{"html_id":"wgsim/Enum","kind":"struct","full_name":"Enum","name":"Enum"},{"html_id":"wgsim/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"},{"html_id":"wgsim/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"wgsim/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/wgsim/ref_base.cr","line_number":2,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/ref_base.cr#L2"}],"repository_name":"wgsim","program":false,"enum":true,"alias":false,"const":false,"constants":[{"id":"NOCHANGE","name":"NOCHANGE","value":"0_u8"},{"id":"SUBSTITUTE","name":"SUBSTITUTE","value":"1_u8"},{"id":"DELETE","name":"DELETE","value":"2_u8"},{"id":"INSERT","name":"INSERT","value":"3_u8"}],"namespace":{"html_id":"wgsim/Wgsim","kind":"module","full_name":"Wgsim","name":"Wgsim"},"instance_methods":[{"html_id":"delete?-instance-method","name":"delete?","abstract":false,"location":{"filename":"src/wgsim/ref_base.cr","line_number":5,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/ref_base.cr#L5"},"def":{"name":"delete?","visibility":"Public","body":"self == DELETE"}},{"html_id":"insert?-instance-method","name":"insert?","abstract":false,"location":{"filename":"src/wgsim/ref_base.cr","line_number":6,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/ref_base.cr#L6"},"def":{"name":"insert?","visibility":"Public","body":"self == INSERT"}},{"html_id":"nochange?-instance-method","name":"nochange?","abstract":false,"location":{"filename":"src/wgsim/ref_base.cr","line_number":3,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/ref_base.cr#L3"},"def":{"name":"nochange?","visibility":"Public","body":"self == NOCHANGE"}},{"html_id":"substitute?-instance-method","name":"substitute?","abstract":false,"location":{"filename":"src/wgsim/ref_base.cr","line_number":4,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/ref_base.cr#L4"},"def":{"name":"substitute?","visibility":"Public","body":"self == SUBSTITUTE"}}]},{"html_id":"wgsim/Wgsim/Parser","path":"Wgsim/Parser.html","kind":"class","full_name":"Wgsim::Parser","name":"Parser","abstract":false,"superclass":{"html_id":"wgsim/OptionParser","kind":"class","full_name":"OptionParser","name":"OptionParser"},"ancestors":[{"html_id":"wgsim/OptionParser","kind":"class","full_name":"OptionParser","name":"OptionParser"},{"html_id":"wgsim/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"wgsim/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/wgsim/parser.cr","line_number":11,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/parser.cr#L11"}],"repository_name":"wgsim","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"wgsim/Wgsim","kind":"module","full_name":"Wgsim","name":"Wgsim"},"constructors":[{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/wgsim/parser.cr","line_number":14,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/parser.cr#L14"},"def":{"name":"new","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"parse(argv=ARGV)-instance-method","name":"parse","doc":"Parses the passed *args* (defaults to `ARGV`), running the handlers associated to each option.","summary":"<p>Parses the passed <em>args</em> (defaults to <code>ARGV</code>), running the handlers associated to each option.</p>","abstract":false,"args":[{"name":"argv","default_value":"ARGV","external_name":"argv","restriction":""}],"args_string":"(argv = ARGV)","args_html":"(argv = <span class=\"t\">ARGV</span>)","location":{"filename":"src/wgsim/parser.cr","line_number":108,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/parser.cr#L108"},"def":{"name":"parse","args":[{"name":"argv","default_value":"ARGV","external_name":"argv","restriction":""}],"visibility":"Public","body":"super(argv)\ncase @option\nwhen Mutate::Option\n  parse_mut(argv)\nwhen Sequence::Option\n  parse_seq(argv)\nelse\n  STDERR.puts(self)\n  exit(1)\nend\n@option.not_nil!\n"}},{"html_id":"parse_mut(argv=ARGV)-instance-method","name":"parse_mut","abstract":false,"args":[{"name":"argv","default_value":"ARGV","external_name":"argv","restriction":""}],"args_string":"(argv = ARGV)","args_html":"(argv = <span class=\"t\">ARGV</span>)","location":{"filename":"src/wgsim/parser.cr","line_number":122,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/parser.cr#L122"},"def":{"name":"parse_mut","args":[{"name":"argv","default_value":"ARGV","external_name":"argv","restriction":""}],"visibility":"Public","body":"validate_arguments(argv, 1)\n(@option.as(Mutate::Option)).reference = Path.new(argv.shift)\nvalidate_file_exists((@option.as(Mutate::Option)).reference)\n"}},{"html_id":"parse_seq(argv=ARGV)-instance-method","name":"parse_seq","abstract":false,"args":[{"name":"argv","default_value":"ARGV","external_name":"argv","restriction":""}],"args_string":"(argv = ARGV)","args_html":"(argv = <span class=\"t\">ARGV</span>)","location":{"filename":"src/wgsim/parser.cr","line_number":128,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/parser.cr#L128"},"def":{"name":"parse_seq","args":[{"name":"argv","default_value":"ARGV","external_name":"argv","restriction":""}],"visibility":"Public","body":"validate_arguments(argv, 3)\n(@option.as(Sequence::Option)).reference = Path.new(argv.shift)\nvalidate_file_exists((@option.as(Sequence::Option)).reference)\n(@option.as(Sequence::Option)).output1 = Path.new(argv.shift)\n(@option.as(Sequence::Option)).output2 = Path.new(argv.shift)\n"}},{"html_id":"validate_arguments(argv,siz)-instance-method","name":"validate_arguments","abstract":false,"args":[{"name":"argv","external_name":"argv","restriction":""},{"name":"siz","external_name":"siz","restriction":""}],"args_string":"(argv, siz)","args_html":"(argv, siz)","location":{"filename":"src/wgsim/parser.cr","line_number":136,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/parser.cr#L136"},"def":{"name":"validate_arguments","args":[{"name":"argv","external_name":"argv","restriction":""},{"name":"siz","external_name":"siz","restriction":""}],"visibility":"Public","body":"if argv.size == siz\nelse\n  Utils.exit_error(\"Invalid number of arguments: #{argv.size} (expected #{siz})\")\nend"}},{"html_id":"validate_file_exists(file)-instance-method","name":"validate_file_exists","abstract":false,"args":[{"name":"file","external_name":"file","restriction":""}],"args_string":"(file)","args_html":"(file)","location":{"filename":"src/wgsim/parser.cr","line_number":142,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/parser.cr#L142"},"def":{"name":"validate_file_exists","args":[{"name":"file","external_name":"file","restriction":""}],"visibility":"Public","body":"if File.exists?(file.not_nil!)\nelse\n  Utils.exit_error(\"File not found: #{file}\")\nend"}}]},{"html_id":"wgsim/Wgsim/RefBase","path":"Wgsim/RefBase.html","kind":"struct","full_name":"Wgsim::RefBase","name":"RefBase","abstract":false,"superclass":{"html_id":"wgsim/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"wgsim/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"wgsim/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"wgsim/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/wgsim/ref_base.cr","line_number":9,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/ref_base.cr#L9"}],"repository_name":"wgsim","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"wgsim/Wgsim","kind":"module","full_name":"Wgsim","name":"Wgsim"},"constructors":[{"html_id":"new(nucleotide:UInt8,mutation_type:Wgsim::MutType,insertion:Slice(UInt8)|Nil=nil)-class-method","name":"new","abstract":false,"args":[{"name":"nucleotide","external_name":"nucleotide","restriction":"::UInt8"},{"name":"mutation_type","external_name":"mutation_type","restriction":"::Wgsim::MutType"},{"name":"insertion","default_value":"nil","external_name":"insertion","restriction":"::Slice(::UInt8) | ::Nil"}],"args_string":"(nucleotide : UInt8, mutation_type : Wgsim::MutType, insertion : Slice(UInt8) | Nil = nil)","args_html":"(nucleotide : UInt8, mutation_type : <a href=\"../Wgsim/MutType.html\">Wgsim::MutType</a>, insertion : Slice(UInt8) | Nil = <span class=\"n\">nil</span>)","location":{"filename":"src/wgsim/ref_base.cr","line_number":14,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/ref_base.cr#L14"},"def":{"name":"new","args":[{"name":"nucleotide","external_name":"nucleotide","restriction":"::UInt8"},{"name":"mutation_type","external_name":"mutation_type","restriction":"::Wgsim::MutType"},{"name":"insertion","default_value":"nil","external_name":"insertion","restriction":"::Slice(::UInt8) | ::Nil"}],"visibility":"Public","body":"_ = allocate\n_.initialize(nucleotide, mutation_type, insertion)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"insertion:Slice(UInt8)|Nil-instance-method","name":"insertion","abstract":false,"location":{"filename":"src/wgsim/ref_base.cr","line_number":12,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/ref_base.cr#L12"},"def":{"name":"insertion","return_type":"Slice(UInt8) | ::Nil","visibility":"Public","body":"@insertion"}},{"html_id":"insertion=(insertion:Slice(UInt8)|Nil)-instance-method","name":"insertion=","abstract":false,"args":[{"name":"insertion","external_name":"insertion","restriction":"Slice(UInt8) | ::Nil"}],"args_string":"(insertion : Slice(UInt8) | Nil)","args_html":"(insertion : Slice(UInt8) | Nil)","location":{"filename":"src/wgsim/ref_base.cr","line_number":12,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/ref_base.cr#L12"},"def":{"name":"insertion=","args":[{"name":"insertion","external_name":"insertion","restriction":"Slice(UInt8) | ::Nil"}],"visibility":"Public","body":"@insertion = insertion"}},{"html_id":"mutation_type:MutType-instance-method","name":"mutation_type","abstract":false,"location":{"filename":"src/wgsim/ref_base.cr","line_number":11,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/ref_base.cr#L11"},"def":{"name":"mutation_type","return_type":"MutType","visibility":"Public","body":"@mutation_type"}},{"html_id":"mutation_type=(mutation_type:MutType)-instance-method","name":"mutation_type=","abstract":false,"args":[{"name":"mutation_type","external_name":"mutation_type","restriction":"MutType"}],"args_string":"(mutation_type : MutType)","args_html":"(mutation_type : <a href=\"../Wgsim/MutType.html\">MutType</a>)","location":{"filename":"src/wgsim/ref_base.cr","line_number":11,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/ref_base.cr#L11"},"def":{"name":"mutation_type=","args":[{"name":"mutation_type","external_name":"mutation_type","restriction":"MutType"}],"visibility":"Public","body":"@mutation_type = mutation_type"}},{"html_id":"nucleotide:UInt8-instance-method","name":"nucleotide","abstract":false,"location":{"filename":"src/wgsim/ref_base.cr","line_number":10,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/ref_base.cr#L10"},"def":{"name":"nucleotide","return_type":"UInt8","visibility":"Public","body":"@nucleotide"}},{"html_id":"nucleotide=(nucleotide:UInt8)-instance-method","name":"nucleotide=","abstract":false,"args":[{"name":"nucleotide","external_name":"nucleotide","restriction":"UInt8"}],"args_string":"(nucleotide : UInt8)","args_html":"(nucleotide : UInt8)","location":{"filename":"src/wgsim/ref_base.cr","line_number":10,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/ref_base.cr#L10"},"def":{"name":"nucleotide=","args":[{"name":"nucleotide","external_name":"nucleotide","restriction":"UInt8"}],"visibility":"Public","body":"@nucleotide = nucleotide"}}]},{"html_id":"wgsim/Wgsim/Sequence","path":"Wgsim/Sequence.html","kind":"module","full_name":"Wgsim::Sequence","name":"Sequence","abstract":false,"locations":[{"filename":"src/wgsim/sequence/action.cr","line_number":6,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/action.cr#L6"},{"filename":"src/wgsim/sequence/option.cr","line_number":2,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L2"},{"filename":"src/wgsim/sequence/simulator.cr","line_number":2,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/simulator.cr#L2"}],"repository_name":"wgsim","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"wgsim/Wgsim","kind":"module","full_name":"Wgsim","name":"Wgsim"},"types":[{"html_id":"wgsim/Wgsim/Sequence/Action","path":"Wgsim/Sequence/Action.html","kind":"class","full_name":"Wgsim::Sequence::Action","name":"Action","abstract":false,"superclass":{"html_id":"wgsim/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"wgsim/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"wgsim/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/wgsim/sequence/action.cr","line_number":7,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/action.cr#L7"}],"repository_name":"wgsim","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"wgsim/Wgsim/Sequence","kind":"module","full_name":"Wgsim::Sequence","name":"Sequence"},"class_methods":[{"html_id":"run(option)-class-method","name":"run","abstract":false,"args":[{"name":"option","external_name":"option","restriction":""}],"args_string":"(option)","args_html":"(option)","location":{"filename":"src/wgsim/sequence/action.cr","line_number":8,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/action.cr#L8"},"def":{"name":"run","args":[{"name":"option","external_name":"option","restriction":""}],"visibility":"Public","body":"(new(option)).run"}}],"constructors":[{"html_id":"new(option:Option)-class-method","name":"new","abstract":false,"args":[{"name":"option","external_name":"option","restriction":"Option"}],"args_string":"(option : Option)","args_html":"(option : <a href=\"../../Wgsim/Sequence/Option.html\">Option</a>)","location":{"filename":"src/wgsim/sequence/action.cr","line_number":12,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/action.cr#L12"},"def":{"name":"new","args":[{"name":"option","external_name":"option","restriction":"Option"}],"visibility":"Public","body":"_ = allocate\n_.initialize(option)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/wgsim/sequence/action.cr","line_number":19,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/action.cr#L19"},"def":{"name":"run","visibility":"Public","body":"reference = sopts.reference.not_nil!\noutput1 = sopts.output1.not_nil!\noutput2 = sopts.output2.not_nil!\nsequence_simulator = Simulator.new(sopts.average_depth, sopts.distance, sopts.std_deviation, sopts.size_left, sopts.size_right, sopts.error_rate, sopts.max_ambiguous_ratio, sopts.seed)\noutput_fasta_1 = File.open(output1, \"w\")\noutput_fasta_2 = File.open(output2, \"w\")\nnames = [] of String\nchannel = Channel(String).new\nFastx::Fasta::Reader.open(reference) do |reader|\n  reader.each do |name, sequence|\n    names << name\n    normalized_sequence = Fastx.normalize_sequence(sequence)\n    spawn do\n      sequence_simulator.run(name, normalized_sequence) do |record1, record2|\n        output_fasta_1.puts(record1)\n        output_fasta_2.puts(record2)\n      end\n      channel.send(name)\n    end\n  end\nend\nwhile names.present?\n  name = channel.receive\n  names.delete(name)\n  STDERR.puts(\"[wgsim] #{name} done\")\nend\noutput_fasta_1.close\noutput_fasta_2.close\n"}}]},{"html_id":"wgsim/Wgsim/Sequence/Option","path":"Wgsim/Sequence/Option.html","kind":"class","full_name":"Wgsim::Sequence::Option","name":"Option","abstract":false,"superclass":{"html_id":"wgsim/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"wgsim/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"wgsim/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/wgsim/sequence/option.cr","line_number":3,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L3"}],"repository_name":"wgsim","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"wgsim/Wgsim/Sequence","kind":"module","full_name":"Wgsim::Sequence","name":"Sequence"},"instance_methods":[{"html_id":"average_depth:Float64-instance-method","name":"average_depth","abstract":false,"location":{"filename":"src/wgsim/sequence/option.cr","line_number":8,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L8"},"def":{"name":"average_depth","return_type":"Float64","visibility":"Public","body":"@average_depth"}},{"html_id":"average_depth=(average_depth:Float64)-instance-method","name":"average_depth=","abstract":false,"args":[{"name":"average_depth","external_name":"average_depth","restriction":"Float64"}],"args_string":"(average_depth : Float64)","args_html":"(average_depth : Float64)","location":{"filename":"src/wgsim/sequence/option.cr","line_number":8,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L8"},"def":{"name":"average_depth=","args":[{"name":"average_depth","external_name":"average_depth","restriction":"Float64"}],"visibility":"Public","body":"@average_depth = average_depth"}},{"html_id":"distance:Int32-instance-method","name":"distance","abstract":false,"location":{"filename":"src/wgsim/sequence/option.cr","line_number":6,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L6"},"def":{"name":"distance","return_type":"Int32","visibility":"Public","body":"@distance"}},{"html_id":"distance=(distance:Int32)-instance-method","name":"distance=","abstract":false,"args":[{"name":"distance","external_name":"distance","restriction":"Int32"}],"args_string":"(distance : Int32)","args_html":"(distance : Int32)","location":{"filename":"src/wgsim/sequence/option.cr","line_number":6,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L6"},"def":{"name":"distance=","args":[{"name":"distance","external_name":"distance","restriction":"Int32"}],"visibility":"Public","body":"@distance = distance"}},{"html_id":"error_rate:Float64-instance-method","name":"error_rate","abstract":false,"location":{"filename":"src/wgsim/sequence/option.cr","line_number":5,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L5"},"def":{"name":"error_rate","return_type":"Float64","visibility":"Public","body":"@error_rate"}},{"html_id":"error_rate=(error_rate:Float64)-instance-method","name":"error_rate=","abstract":false,"args":[{"name":"error_rate","external_name":"error_rate","restriction":"Float64"}],"args_string":"(error_rate : Float64)","args_html":"(error_rate : Float64)","location":{"filename":"src/wgsim/sequence/option.cr","line_number":5,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L5"},"def":{"name":"error_rate=","args":[{"name":"error_rate","external_name":"error_rate","restriction":"Float64"}],"visibility":"Public","body":"@error_rate = error_rate"}},{"html_id":"indel_extension_probability:Float64-instance-method","name":"indel_extension_probability","abstract":false,"location":{"filename":"src/wgsim/sequence/option.cr","line_number":13,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L13"},"def":{"name":"indel_extension_probability","return_type":"Float64","visibility":"Public","body":"@indel_extension_probability"}},{"html_id":"indel_extension_probability=(indel_extension_probability:Float64)-instance-method","name":"indel_extension_probability=","abstract":false,"args":[{"name":"indel_extension_probability","external_name":"indel_extension_probability","restriction":"Float64"}],"args_string":"(indel_extension_probability : Float64)","args_html":"(indel_extension_probability : Float64)","location":{"filename":"src/wgsim/sequence/option.cr","line_number":13,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L13"},"def":{"name":"indel_extension_probability=","args":[{"name":"indel_extension_probability","external_name":"indel_extension_probability","restriction":"Float64"}],"visibility":"Public","body":"@indel_extension_probability = indel_extension_probability"}},{"html_id":"indel_fraction:Float64-instance-method","name":"indel_fraction","abstract":false,"location":{"filename":"src/wgsim/sequence/option.cr","line_number":12,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L12"},"def":{"name":"indel_fraction","return_type":"Float64","visibility":"Public","body":"@indel_fraction"}},{"html_id":"indel_fraction=(indel_fraction:Float64)-instance-method","name":"indel_fraction=","abstract":false,"args":[{"name":"indel_fraction","external_name":"indel_fraction","restriction":"Float64"}],"args_string":"(indel_fraction : Float64)","args_html":"(indel_fraction : Float64)","location":{"filename":"src/wgsim/sequence/option.cr","line_number":12,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L12"},"def":{"name":"indel_fraction=","args":[{"name":"indel_fraction","external_name":"indel_fraction","restriction":"Float64"}],"visibility":"Public","body":"@indel_fraction = indel_fraction"}},{"html_id":"max_ambiguous_ratio:Float64-instance-method","name":"max_ambiguous_ratio","abstract":false,"location":{"filename":"src/wgsim/sequence/option.cr","line_number":14,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L14"},"def":{"name":"max_ambiguous_ratio","return_type":"Float64","visibility":"Public","body":"@max_ambiguous_ratio"}},{"html_id":"max_ambiguous_ratio=(max_ambiguous_ratio:Float64)-instance-method","name":"max_ambiguous_ratio=","abstract":false,"args":[{"name":"max_ambiguous_ratio","external_name":"max_ambiguous_ratio","restriction":"Float64"}],"args_string":"(max_ambiguous_ratio : Float64)","args_html":"(max_ambiguous_ratio : Float64)","location":{"filename":"src/wgsim/sequence/option.cr","line_number":14,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L14"},"def":{"name":"max_ambiguous_ratio=","args":[{"name":"max_ambiguous_ratio","external_name":"max_ambiguous_ratio","restriction":"Float64"}],"visibility":"Public","body":"@max_ambiguous_ratio = max_ambiguous_ratio"}},{"html_id":"mutation_rate:Float64-instance-method","name":"mutation_rate","abstract":false,"location":{"filename":"src/wgsim/sequence/option.cr","line_number":11,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L11"},"def":{"name":"mutation_rate","return_type":"Float64","visibility":"Public","body":"@mutation_rate"}},{"html_id":"mutation_rate=(mutation_rate:Float64)-instance-method","name":"mutation_rate=","abstract":false,"args":[{"name":"mutation_rate","external_name":"mutation_rate","restriction":"Float64"}],"args_string":"(mutation_rate : Float64)","args_html":"(mutation_rate : Float64)","location":{"filename":"src/wgsim/sequence/option.cr","line_number":11,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L11"},"def":{"name":"mutation_rate=","args":[{"name":"mutation_rate","external_name":"mutation_rate","restriction":"Float64"}],"visibility":"Public","body":"@mutation_rate = mutation_rate"}},{"html_id":"output1:Path|Nil-instance-method","name":"output1","abstract":false,"location":{"filename":"src/wgsim/sequence/option.cr","line_number":16,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L16"},"def":{"name":"output1","return_type":"Path | ::Nil","visibility":"Public","body":"@output1"}},{"html_id":"output1=(output1:Path|Nil)-instance-method","name":"output1=","abstract":false,"args":[{"name":"output1","external_name":"output1","restriction":"Path | ::Nil"}],"args_string":"(output1 : Path | Nil)","args_html":"(output1 : Path | Nil)","location":{"filename":"src/wgsim/sequence/option.cr","line_number":16,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L16"},"def":{"name":"output1=","args":[{"name":"output1","external_name":"output1","restriction":"Path | ::Nil"}],"visibility":"Public","body":"@output1 = output1"}},{"html_id":"output2:Path|Nil-instance-method","name":"output2","abstract":false,"location":{"filename":"src/wgsim/sequence/option.cr","line_number":17,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L17"},"def":{"name":"output2","return_type":"Path | ::Nil","visibility":"Public","body":"@output2"}},{"html_id":"output2=(output2:Path|Nil)-instance-method","name":"output2=","abstract":false,"args":[{"name":"output2","external_name":"output2","restriction":"Path | ::Nil"}],"args_string":"(output2 : Path | Nil)","args_html":"(output2 : Path | Nil)","location":{"filename":"src/wgsim/sequence/option.cr","line_number":17,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L17"},"def":{"name":"output2=","args":[{"name":"output2","external_name":"output2","restriction":"Path | ::Nil"}],"visibility":"Public","body":"@output2 = output2"}},{"html_id":"reference:Path|Nil-instance-method","name":"reference","abstract":false,"location":{"filename":"src/wgsim/sequence/option.cr","line_number":15,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L15"},"def":{"name":"reference","return_type":"Path | ::Nil","visibility":"Public","body":"@reference"}},{"html_id":"reference=(reference:Path|Nil)-instance-method","name":"reference=","abstract":false,"args":[{"name":"reference","external_name":"reference","restriction":"Path | ::Nil"}],"args_string":"(reference : Path | Nil)","args_html":"(reference : Path | Nil)","location":{"filename":"src/wgsim/sequence/option.cr","line_number":15,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L15"},"def":{"name":"reference=","args":[{"name":"reference","external_name":"reference","restriction":"Path | ::Nil"}],"visibility":"Public","body":"@reference = reference"}},{"html_id":"seed:UInt64|Nil-instance-method","name":"seed","abstract":false,"location":{"filename":"src/wgsim/sequence/option.cr","line_number":4,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L4"},"def":{"name":"seed","return_type":"UInt64 | ::Nil","visibility":"Public","body":"@seed"}},{"html_id":"seed=(seed:UInt64|Nil)-instance-method","name":"seed=","abstract":false,"args":[{"name":"seed","external_name":"seed","restriction":"UInt64 | ::Nil"}],"args_string":"(seed : UInt64 | Nil)","args_html":"(seed : UInt64 | Nil)","location":{"filename":"src/wgsim/sequence/option.cr","line_number":4,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L4"},"def":{"name":"seed=","args":[{"name":"seed","external_name":"seed","restriction":"UInt64 | ::Nil"}],"visibility":"Public","body":"@seed = seed"}},{"html_id":"size_left:Int32-instance-method","name":"size_left","abstract":false,"location":{"filename":"src/wgsim/sequence/option.cr","line_number":9,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L9"},"def":{"name":"size_left","return_type":"Int32","visibility":"Public","body":"@size_left"}},{"html_id":"size_left=(size_left:Int32)-instance-method","name":"size_left=","abstract":false,"args":[{"name":"size_left","external_name":"size_left","restriction":"Int32"}],"args_string":"(size_left : Int32)","args_html":"(size_left : Int32)","location":{"filename":"src/wgsim/sequence/option.cr","line_number":9,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L9"},"def":{"name":"size_left=","args":[{"name":"size_left","external_name":"size_left","restriction":"Int32"}],"visibility":"Public","body":"@size_left = size_left"}},{"html_id":"size_right:Int32-instance-method","name":"size_right","abstract":false,"location":{"filename":"src/wgsim/sequence/option.cr","line_number":10,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L10"},"def":{"name":"size_right","return_type":"Int32","visibility":"Public","body":"@size_right"}},{"html_id":"size_right=(size_right:Int32)-instance-method","name":"size_right=","abstract":false,"args":[{"name":"size_right","external_name":"size_right","restriction":"Int32"}],"args_string":"(size_right : Int32)","args_html":"(size_right : Int32)","location":{"filename":"src/wgsim/sequence/option.cr","line_number":10,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L10"},"def":{"name":"size_right=","args":[{"name":"size_right","external_name":"size_right","restriction":"Int32"}],"visibility":"Public","body":"@size_right = size_right"}},{"html_id":"std_deviation:Int32-instance-method","name":"std_deviation","abstract":false,"location":{"filename":"src/wgsim/sequence/option.cr","line_number":7,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L7"},"def":{"name":"std_deviation","return_type":"Int32","visibility":"Public","body":"@std_deviation"}},{"html_id":"std_deviation=(std_deviation:Int32)-instance-method","name":"std_deviation=","abstract":false,"args":[{"name":"std_deviation","external_name":"std_deviation","restriction":"Int32"}],"args_string":"(std_deviation : Int32)","args_html":"(std_deviation : Int32)","location":{"filename":"src/wgsim/sequence/option.cr","line_number":7,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/option.cr#L7"},"def":{"name":"std_deviation=","args":[{"name":"std_deviation","external_name":"std_deviation","restriction":"Int32"}],"visibility":"Public","body":"@std_deviation = std_deviation"}}]},{"html_id":"wgsim/Wgsim/Sequence/Simulator","path":"Wgsim/Sequence/Simulator.html","kind":"class","full_name":"Wgsim::Sequence::Simulator","name":"Simulator","abstract":false,"superclass":{"html_id":"wgsim/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"wgsim/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"wgsim/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/wgsim/sequence/simulator.cr","line_number":3,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/simulator.cr#L3"}],"repository_name":"wgsim","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"wgsim/Wgsim/Sequence","kind":"module","full_name":"Wgsim::Sequence","name":"Sequence"},"constructors":[{"html_id":"new(average_depth:Float64,distance:Int32,std_deviation:Int32,size_left:Int32,size_right:Int32,error_rate:Float64,max_ambiguous_ratio:Float64,seed:UInt64|Nil=nil)-class-method","name":"new","abstract":false,"args":[{"name":"average_depth","external_name":"average_depth","restriction":"::Float64"},{"name":"distance","external_name":"distance","restriction":"::Int32"},{"name":"std_deviation","external_name":"std_deviation","restriction":"::Int32"},{"name":"size_left","external_name":"size_left","restriction":"::Int32"},{"name":"size_right","external_name":"size_right","restriction":"::Int32"},{"name":"error_rate","external_name":"error_rate","restriction":"::Float64"},{"name":"max_ambiguous_ratio","external_name":"max_ambiguous_ratio","restriction":"::Float64"},{"name":"seed","default_value":"nil","external_name":"seed","restriction":"UInt64 | ::Nil"}],"args_string":"(average_depth : Float64, distance : Int32, std_deviation : Int32, size_left : Int32, size_right : Int32, error_rate : Float64, max_ambiguous_ratio : Float64, seed : UInt64 | Nil = nil)","args_html":"(average_depth : Float64, distance : Int32, std_deviation : Int32, size_left : Int32, size_right : Int32, error_rate : Float64, max_ambiguous_ratio : Float64, seed : UInt64 | Nil = <span class=\"n\">nil</span>)","location":{"filename":"src/wgsim/sequence/simulator.cr","line_number":14,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/simulator.cr#L14"},"def":{"name":"new","args":[{"name":"average_depth","external_name":"average_depth","restriction":"::Float64"},{"name":"distance","external_name":"distance","restriction":"::Int32"},{"name":"std_deviation","external_name":"std_deviation","restriction":"::Int32"},{"name":"size_left","external_name":"size_left","restriction":"::Int32"},{"name":"size_right","external_name":"size_right","restriction":"::Int32"},{"name":"error_rate","external_name":"error_rate","restriction":"::Float64"},{"name":"max_ambiguous_ratio","external_name":"max_ambiguous_ratio","restriction":"::Float64"},{"name":"seed","default_value":"nil","external_name":"seed","restriction":"UInt64 | ::Nil"}],"visibility":"Public","body":"_ = allocate\n_.initialize(average_depth, distance, std_deviation, size_left, size_right, error_rate, max_ambiguous_ratio, seed)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"_rand(*args,**options)-instance-method","name":"_rand","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/wgsim/sequence/simulator.cr","line_number":4,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/simulator.cr#L4"},"def":{"name":"_rand","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"@random._rand(*args, **options)"}},{"html_id":"_rand(*args,**options,&)-instance-method","name":"_rand","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/wgsim/sequence/simulator.cr","line_number":4,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/simulator.cr#L4"},"def":{"name":"_rand","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arity":1,"visibility":"Public","body":"@random._rand(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"html_id":"average_depth:Float64-instance-method","name":"average_depth","abstract":false,"location":{"filename":"src/wgsim/sequence/simulator.cr","line_number":8,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/simulator.cr#L8"},"def":{"name":"average_depth","return_type":"Float64","visibility":"Public","body":"@average_depth"}},{"html_id":"distance:Int32-instance-method","name":"distance","abstract":false,"location":{"filename":"src/wgsim/sequence/simulator.cr","line_number":6,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/simulator.cr#L6"},"def":{"name":"distance","return_type":"Int32","visibility":"Public","body":"@distance"}},{"html_id":"error_rate:Float64-instance-method","name":"error_rate","abstract":false,"location":{"filename":"src/wgsim/sequence/simulator.cr","line_number":11,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/simulator.cr#L11"},"def":{"name":"error_rate","return_type":"Float64","visibility":"Public","body":"@error_rate"}},{"html_id":"fasta_record(name,pair_index,position,insert_size,read_index,sequence:Slice(UInt8)):String-instance-method","name":"fasta_record","abstract":false,"args":[{"name":"name","external_name":"name","restriction":""},{"name":"pair_index","external_name":"pair_index","restriction":""},{"name":"position","external_name":"position","restriction":""},{"name":"insert_size","external_name":"insert_size","restriction":""},{"name":"read_index","external_name":"read_index","restriction":""},{"name":"sequence","external_name":"sequence","restriction":"Slice(UInt8)"}],"args_string":"(name, pair_index, position, insert_size, read_index, sequence : Slice(UInt8)) : String","args_html":"(name, pair_index, position, insert_size, read_index, sequence : Slice(UInt8)) : String","location":{"filename":"src/wgsim/sequence/simulator.cr","line_number":87,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/simulator.cr#L87"},"def":{"name":"fasta_record","args":[{"name":"name","external_name":"name","restriction":""},{"name":"pair_index","external_name":"pair_index","restriction":""},{"name":"position","external_name":"position","restriction":""},{"name":"insert_size","external_name":"insert_size","restriction":""},{"name":"read_index","external_name":"read_index","restriction":""},{"name":"sequence","external_name":"sequence","restriction":"Slice(UInt8)"}],"return_type":"String","visibility":"Public","body":"sequence = String.new(sequence)\nString.build do |str|\n  (str << \">#{name}_#{position}_#{insert_size}:#{pair_index}/#{read_index + 1}\") << \"\\n\"\n  (str << sequence) << \"\\n\"\n  (str << \"+\") << \"\\n\"\n  (str << (\"2\" * [size_left, size_right][read_index])) << \"\\n\"\nend\n"}},{"html_id":"generate_pair_sequence(target_seq,position,insert_size,flip):Tuple(Slice(UInt8),Slice(UInt8))-instance-method","name":"generate_pair_sequence","abstract":false,"args":[{"name":"target_seq","external_name":"target_seq","restriction":""},{"name":"position","external_name":"position","restriction":""},{"name":"insert_size","external_name":"insert_size","restriction":""},{"name":"flip","external_name":"flip","restriction":""}],"args_string":"(target_seq, position, insert_size, flip) : Tuple(Slice(UInt8), Slice(UInt8))","args_html":"(target_seq, position, insert_size, flip) : Tuple(Slice(UInt8), Slice(UInt8))","location":{"filename":"src/wgsim/sequence/simulator.cr","line_number":75,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/simulator.cr#L75"},"def":{"name":"generate_pair_sequence","args":[{"name":"target_seq","external_name":"target_seq","restriction":""},{"name":"position","external_name":"position","restriction":""},{"name":"insert_size","external_name":"insert_size","restriction":""},{"name":"flip","external_name":"flip","restriction":""}],"return_type":"Tuple(Slice(UInt8), Slice(UInt8))","visibility":"Public","body":"if flip\n  read1 = target_seq[position...(position + size_left)]\n  read2 = reverse_complement(target_seq[((position + insert_size) - size_right)...(position + insert_size)])\nelse\n  read1 = reverse_complement(target_seq[((position + insert_size) - size_left)...(position + insert_size)])\n  read2 = target_seq[position...(position + size_right)]\nend\n{read1, read2}\n"}},{"html_id":"generate_sequencing_error(sequence:Slice(UInt8)):Slice(UInt8)-instance-method","name":"generate_sequencing_error","abstract":false,"args":[{"name":"sequence","external_name":"sequence","restriction":"Slice(UInt8)"}],"args_string":"(sequence : Slice(UInt8)) : Slice(UInt8)","args_html":"(sequence : Slice(UInt8)) : Slice(UInt8)","location":{"filename":"src/wgsim/sequence/simulator.cr","line_number":97,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/simulator.cr#L97"},"def":{"name":"generate_sequencing_error","args":[{"name":"sequence","external_name":"sequence","restriction":"Slice(UInt8)"}],"return_type":"Slice(UInt8)","visibility":"Public","body":"valid_nucleotides = [65_u8, 67_u8, 71_u8, 84_u8]\nsequence.map do |b|\n  case b\n  when 78_u8\n    b\n  when 65_u8, 67_u8, 71_u8, 84_u8\n    if _rand < error_rate\n      other_nucleotides = valid_nucleotides - [b]\n      other_nucleotides[_rand(3)]\n    else\n      b\n    end\n  else\n    raise(\"Invalid nucleotide: #{b}\")\n  end\nend\n"}},{"html_id":"max_ambiguous_ratio:Float64-instance-method","name":"max_ambiguous_ratio","abstract":false,"location":{"filename":"src/wgsim/sequence/simulator.cr","line_number":12,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/simulator.cr#L12"},"def":{"name":"max_ambiguous_ratio","return_type":"Float64","visibility":"Public","body":"@max_ambiguous_ratio"}},{"html_id":"rand_bool(*args,**options)-instance-method","name":"rand_bool","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/wgsim/sequence/simulator.cr","line_number":4,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/simulator.cr#L4"},"def":{"name":"rand_bool","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"@random.rand_bool(*args, **options)"}},{"html_id":"rand_bool(*args,**options,&)-instance-method","name":"rand_bool","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/wgsim/sequence/simulator.cr","line_number":4,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/simulator.cr#L4"},"def":{"name":"rand_bool","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arity":1,"visibility":"Public","body":"@random.rand_bool(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"html_id":"randn(*args,**options)-instance-method","name":"randn","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/wgsim/sequence/simulator.cr","line_number":4,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/simulator.cr#L4"},"def":{"name":"randn","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"@random.randn(*args, **options)"}},{"html_id":"randn(*args,**options,&)-instance-method","name":"randn","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/wgsim/sequence/simulator.cr","line_number":4,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/simulator.cr#L4"},"def":{"name":"randn","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arity":1,"visibility":"Public","body":"@random.randn(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"html_id":"random_insert_size-instance-method","name":"random_insert_size","abstract":false,"location":{"filename":"src/wgsim/sequence/simulator.cr","line_number":130,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/simulator.cr#L130"},"def":{"name":"random_insert_size","visibility":"Public","body":"[(randn(distance, std_deviation)).to_i, size_left, size_right].max"}},{"html_id":"random_position(contig_length:Int,insert_size:Int)-instance-method","name":"random_position","abstract":false,"args":[{"name":"contig_length","external_name":"contig_length","restriction":"Int"},{"name":"insert_size","external_name":"insert_size","restriction":"Int"}],"args_string":"(contig_length : Int, insert_size : Int)","args_html":"(contig_length : Int, insert_size : Int)","location":{"filename":"src/wgsim/sequence/simulator.cr","line_number":134,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/simulator.cr#L134"},"def":{"name":"random_position","args":[{"name":"contig_length","external_name":"contig_length","restriction":"Int"},{"name":"insert_size","external_name":"insert_size","restriction":"Int"}],"visibility":"Public","body":"_rand((contig_length - insert_size) + 1)"}},{"html_id":"reverse_complement(sequence:Slice(UInt8)):Slice(UInt8)-instance-method","name":"reverse_complement","abstract":false,"args":[{"name":"sequence","external_name":"sequence","restriction":"Slice(UInt8)"}],"args_string":"(sequence : Slice(UInt8)) : Slice(UInt8)","args_html":"(sequence : Slice(UInt8)) : Slice(UInt8)","location":{"filename":"src/wgsim/sequence/simulator.cr","line_number":116,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/simulator.cr#L116"},"def":{"name":"reverse_complement","args":[{"name":"sequence","external_name":"sequence","restriction":"Slice(UInt8)"}],"return_type":"Slice(UInt8)","visibility":"Public","body":"complements = {65_u8 => 84_u8, 67_u8 => 71_u8, 71_u8 => 67_u8, 84_u8 => 65_u8, 78_u8 => 78_u8}\nsequence.map do |b|\n  complements.fetch(b) do\n    raise(\"Invalid nucleotide: #{b}\")\n  end\nend.reverse!\n"}},{"html_id":"run(name,sequence,&)-instance-method","name":"run","abstract":false,"args":[{"name":"name","external_name":"name","restriction":""},{"name":"sequence","external_name":"sequence","restriction":""}],"args_string":"(name, sequence, &)","args_html":"(name, sequence, &)","location":{"filename":"src/wgsim/sequence/simulator.cr","line_number":32,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/simulator.cr#L32"},"def":{"name":"run","args":[{"name":"name","external_name":"name","restriction":""},{"name":"sequence","external_name":"sequence","restriction":""}],"yields":2,"block_arity":2,"visibility":"Public","body":"contig_length = sequence.size\nn_pairs = ((contig_length * average_depth) / (size_left + size_right)).to_i\npair_index = 0\nwhile pair_index < n_pairs\n  ((pair_index % (10 ** ((Math.log10(n_pairs)).to_i - 1))) == 0) && (puts(\"[wgsim] #{name} #{pair_index}/#{n_pairs}\"))\n  insert_size = random_insert_size\n  position = random_position(contig_length, insert_size)\n  ((position < 0 || position > contig_length) || ((position + insert_size) - 1) < contig_length) || (raise(\"Invalid position or insert size: position=#{position}, insert_size=#{insert_size}, contig_length=#{contig_length}\"))\n  flip = rand_bool\n  read1_sequence, read2_sequence = generate_pair_sequence(sequence, position, insert_size, flip)\n  if ((read1_sequence.count('N')) / read1_sequence.size) > max_ambiguous_ratio || ((read2_sequence.count('N')) / read2_sequence.size) > max_ambiguous_ratio\n    next\n  end\n  read1_sequence = generate_sequencing_error(read1_sequence)\n  read2_sequence = generate_sequencing_error(read2_sequence)\n  yield(fasta_record(name.split[0], pair_index, position, insert_size, 0, read1_sequence), fasta_record(name.split[0], pair_index, position, insert_size, 1, read2_sequence))\n  pair_index = pair_index + 1\nend\n"}},{"html_id":"size_left:Int32-instance-method","name":"size_left","abstract":false,"location":{"filename":"src/wgsim/sequence/simulator.cr","line_number":9,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/simulator.cr#L9"},"def":{"name":"size_left","return_type":"Int32","visibility":"Public","body":"@size_left"}},{"html_id":"size_right:Int32-instance-method","name":"size_right","abstract":false,"location":{"filename":"src/wgsim/sequence/simulator.cr","line_number":10,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/simulator.cr#L10"},"def":{"name":"size_right","return_type":"Int32","visibility":"Public","body":"@size_right"}},{"html_id":"std_deviation:Int32-instance-method","name":"std_deviation","abstract":false,"location":{"filename":"src/wgsim/sequence/simulator.cr","line_number":7,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/sequence/simulator.cr#L7"},"def":{"name":"std_deviation","return_type":"Int32","visibility":"Public","body":"@std_deviation"}}]}]},{"html_id":"wgsim/Wgsim/Utils","path":"Wgsim/Utils.html","kind":"module","full_name":"Wgsim::Utils","name":"Utils","abstract":false,"locations":[{"filename":"src/wgsim/utils.cr","line_number":4,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/utils.cr#L4"}],"repository_name":"wgsim","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"wgsim/Wgsim","kind":"module","full_name":"Wgsim","name":"Wgsim"},"class_methods":[{"html_id":"exit_error(message:String,color=:default)-class-method","name":"exit_error","abstract":false,"args":[{"name":"message","external_name":"message","restriction":"String"},{"name":"color","default_value":":default","external_name":"color","restriction":""}],"args_string":"(message : String, color = :default)","args_html":"(message : String, color = <span class=\"n\">:default</span>)","location":{"filename":"src/wgsim/utils.cr","line_number":5,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/utils.cr#L5"},"def":{"name":"exit_error","args":[{"name":"message","external_name":"message","restriction":"String"},{"name":"color","default_value":":default","external_name":"color","restriction":""}],"visibility":"Public","body":"print_error(message, color)\nexit(1)\n"}},{"html_id":"print_error(message:String,color=:default)-class-method","name":"print_error","abstract":false,"args":[{"name":"message","external_name":"message","restriction":"String"},{"name":"color","default_value":":default","external_name":"color","restriction":""}],"args_string":"(message : String, color = :default)","args_html":"(message : String, color = <span class=\"n\">:default</span>)","location":{"filename":"src/wgsim/utils.cr","line_number":10,"url":"https://github.com/kojix2/wgsim.cr/blob/ffd12a864db81e545f2ff4c5f121739704ebacf6/src/wgsim/utils.cr#L10"},"def":{"name":"print_error","args":[{"name":"message","external_name":"message","restriction":"String"},{"name":"color","default_value":":default","external_name":"color","restriction":""}],"visibility":"Public","body":"STDERR.print(\"[wgsim] \".colorize.mode(:bold))\nSTDERR.puts((message.colorize.fore(color)).mode(:bold))\n"}}]}]}]}}